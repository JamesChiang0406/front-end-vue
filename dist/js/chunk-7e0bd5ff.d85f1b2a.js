(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e0bd5ff"],{9729:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"row mt-2"},[s("div",{staticClass:"sidebar-area col-3 px-4"},[s("SideBar",{on:{openArea:e.openTweetArea}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isProcessing,expression:"isProcessing"}],staticClass:"fa-3x col-6",staticStyle:{border:"2px #e9e9e9 solid",padding:"0"}},[s("i",{staticClass:"fas fa-circle-notch fa-spin"})]),s("div",{staticClass:"tweet-text col-6 border",class:{dataReading:e.isProcessing}},[s("div",{staticClass:"title d-flex justify-content-start align-items-center px-3"},[s("div",{staticClass:"back-icon mr-3",on:{click:function(t){return e.$router.back()}}},[s("i",{staticClass:"fas fa-arrow-left"})]),s("span",[e._v("推文")])]),s("div",{staticClass:"tweet-area d-flex flex-column"},[s("div",{staticClass:"tweeter-profile d-flex px-3 my-2"},[s("router-link",{attrs:{to:{name:"other-user",params:{id:e.tweet.UserId}}}},[s("img",{staticClass:"image-area",staticStyle:{width:"40px",height:"40px","margin-top":"5px","margin-right":"10px"},attrs:{src:e.tweet.user.avatar,alt:"avatar-img"}})]),s("div",{staticClass:"name-account d-flex justify-content-center flex-column"},[s("span",{staticClass:"follower-name fw-bold"},[e._v(e._s(e.tweet.user.name))]),s("small",{staticClass:"follower-account"},[e._v("@"+e._s(e.tweet.user.account))])])],1),s("div",{staticClass:"article px-3"},[s("p",{staticClass:"mb-1"},[e._v(" "+e._s(e.tweet.description)+" ")])]),s("div",{staticClass:"publish-time pb-1"},[s("span",[e._v(e._s(e.tweet.createdAt))])]),s("div",{staticClass:"replys-likes d-flex flex-column"},[s("div",{staticClass:"numbers d-flex px-2 py-1"},[e.tweet.isLiked?s("div",{staticClass:"likes isLiked",staticStyle:{"margin-right":"15px"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.unlikeThisTweet(e.tweet.id)}}},[s("span",{staticClass:"like-numbers"},[e._v(e._s(e.tweet.likedCount)+" ")]),s("span",[e._v("喜歡")])]):s("div",{staticClass:"likes",staticStyle:{"margin-right":"15px"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.likeThisTweet(e.tweet.id)}}},[s("span",{staticClass:"like-numbers"},[e._v(e._s(e.tweet.likedCount)+" ")]),s("span",[e._v("喜歡")])]),s("div",{staticClass:"reply-numbers",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.openReplyArea(e.tweet.id)}}},[s("span",[e._v(e._s(e.tweet.repliedCount)+" ")]),s("span",[e._v("回覆")])])])])]),e._l(e.tweet.tweetReplies,(function(t){return s("div",{key:t.id,staticClass:"replys d-flex justify-content-between py-2 px-3"},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"image-area pt-2",staticStyle:{"margin-right":"16px"}},[s("router-link",{attrs:{to:{name:"other-user",params:{id:t.User.id}}}},[s("img",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t.User.avatar,alt:"icon"}})])],1),s("div",{staticClass:"text-area d-flex flex-column flex-wrap"},[s("div",{staticClass:"profile d-flex justify-content-start align-items-center"},[s("span",{staticClass:"follower-name",staticStyle:{"margin-right":"10px"}},[e._v(e._s(t.User.name))]),s("span",{staticClass:"follower-account"},[e._v("@"+e._s(t.User.account)+" ‧ "+e._s(t.updatedAt))])]),s("div",{staticClass:"reply-to"},[s("span",{staticStyle:{"font-size":"15px","margin-right":"3px"}},[e._v("回覆")]),s("router-link",{staticStyle:{"font-size":"15px"},attrs:{to:{name:"other-user",params:{id:e.tweet.UserId}}}},[e._v("@"+e._s(e.tweet.user.account))])],1),s("div",{staticClass:"tweet"},[s("p",{staticClass:"m-0"},[e._v(e._s(t.comment))])])])]),t.isUserReply?s("div",{on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.deleteReply(t.id)}}},[s("i",{staticClass:"fas fa-times delete-btn"})]):e._e()])}))],2),s("div",{staticClass:"col-3 pr-0 pl-2"},[s("FollowWho")],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isTweetBtnClicked,expression:"isTweetBtnClicked"}],staticClass:"tweeting-area"},[s("TweetingForm",{attrs:{"user-avatar":e.userAvatar},on:{closeArea:e.closeTweetArea}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isReplyBtnClicked,expression:"isReplyBtnClicked"}],staticClass:"replying-area"},[s("ReplyingForm",{attrs:{"reply-tweet":e.replyTweet},on:{closeArea:e.closeReplyArea,closeAndUp:e.closeAndUp}})],1)])},a=[],i=s("1da1"),n=(s("96cf"),s("d81d"),s("a4d3"),s("e01a"),s("4de4"),s("7c08")),c=s("61f9"),l=s("cfb4"),o=s("c245"),u=s("7482"),d=s("2fa3"),p=s("c1df"),w=s.n(p),f={components:{SideBar:n["a"],FollowWho:c["a"],ReplyingForm:o["a"],TweetingForm:l["a"]},data:function(){return{tweetId:this.$route.params.id,userAvatar:this.$store.state.currentUser.avatar,tweet:{UserId:-1,user:{account:"",avatar:"",name:""},tweetReplies:{}},isProcessing:!1,isTweetBtnClicked:!1,isReplyBtnClicked:!1,replyTweet:{userId:-1,tweetId:-1,createdAt:"",description:"",user:{account:"",avatar:"",name:""}}}},created:function(){this.fetchTweet(),w.a.locale("zh-tw")},methods:{fetchTweet:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isProcessing=!0,s=e.$store.state.currentUser.id,t.next=5,u["a"].getTweet({tweetId:e.tweetId});case 5:if(r=t.sent,a=r.data,"error"!==a.status){t.next=9;break}throw new Error;case 9:e.tweet=a,e.tweet.createdAt=w()(e.tweet.createdAt).format("Ah:mm ‧ YYYY年MM月DD日"),e.tweet.tweetReplies.map((function(e){e.User.id===s?e.isUserReply=!0:e.isUserReply=!1,e.updatedAt=w()(e.updatedAt).fromNow()})),e.isProcessing=!1,t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),d["a"].fire({icon:"error",title:"此推文不存在，請重新查詢！"});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()},likeThisTweet:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,u["a"].likeTweet({tweetId:e});case 3:if(r=s.sent,a=r.data,"error"!==a.status){s.next=7;break}throw new Error(a.message);case 7:t.tweet.isLiked=!0,t.tweet.likedCount+=1,s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](0),d["a"].fire({icon:"error",title:"無法操作，請稍後再試！"});case 14:case"end":return s.stop()}}),s,null,[[0,11]])})))()},unlikeThisTweet:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,u["a"].unlikeTweet({tweetId:e});case 3:if(r=s.sent,a=r.data,"error"!==a.message){s.next=7;break}throw new Error(a.message);case 7:t.tweet.isLiked=!1,t.tweet.likedCount-=1,s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](0),d["a"].fire({icon:"error",title:"無法操作，請稍後再試！"});case 14:case"end":return s.stop()}}),s,null,[[0,11]])})))()},openTweetArea:function(){this.isTweetBtnClicked=!0},closeTweetArea:function(){this.isTweetBtnClicked=!1},openReplyArea:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,u["a"].getTweet({tweetId:e});case 3:if(r=s.sent,a=r.data,"error"!==a.status){s.next=7;break}throw new Error(a.message);case 7:t.replyTweet.userId=a.UserId,t.replyTweet.tweetId=e,t.replyTweet.createdAt=w()(a.createdAt).fromNow(),t.replyTweet.description=a.description,t.replyTweet.user=a.user,t.isReplyBtnClicked=!0,s.next=18;break;case 15:s.prev=15,s.t0=s["catch"](0),d["a"].fire({icon:"error",title:"無法取得推文，請稍後再試！"});case 18:case"end":return s.stop()}}),s,null,[[0,15]])})))()},closeReplyArea:function(){this.isReplyBtnClicked=!1},closeAndUp:function(){this.isReplyBtnClicked=!1,this.fetchTweet()},deleteReply:function(e){var t=this;d["a"].fire({icon:"warning",title:"確定要刪除此回覆嗎？",showConfirmButton:!0,showCancelButton:!0}).then(function(){var s=Object(i["a"])(regeneratorRuntime.mark((function s(r){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!r.isConfirmed){s.next=11;break}return s.next=3,u["a"].deleteReply({reply_id:e});case 3:if(a=s.sent,i=a.data,"error"!==i.status){s.next=7;break}throw new Error(i.message);case 7:d["a"].fire({icon:"success",title:"刪除回覆成功！"}),t.tweet.tweetReplies=t.tweet.tweetReplies.filter((function(t){return t.id!==e})),s.next=12;break;case 11:return s.abrupt("return");case 12:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}())}}},v=f,m=(s("d408"),s("2877")),h=Object(m["a"])(v,r,a,!1,null,"43251796",null);t["default"]=h.exports},d408:function(e,t,s){"use strict";s("dfd5")},dfd5:function(e,t,s){}}]);
//# sourceMappingURL=chunk-7e0bd5ff.d85f1b2a.js.map