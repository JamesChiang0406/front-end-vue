(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d781eacc"],{"0b73":function(t,e,a){"use strict";a("498e")},"0e59":function(t,e,a){},"48f5":function(t,e,a){"use strict";a("0e59")},"498e":function(t,e,a){},"4c90":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mr-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-2 p-0 sidebar-area",staticStyle:{height:"350px"}},[a("AdminSideBar",{attrs:{"page-name":"mainPage"}})],1),a("div",{staticClass:"tweets-list col-10 p-0"},[t._m(0),t._l(t.tweets,(function(e){return a("div",{key:e.id,staticClass:"tweets d-flex justify-content-between p-2"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"tweeter-pic pt-2 mr-2"},[a("img",{staticStyle:{width:"45px",height:"45px"},attrs:{src:e.user.avatar,alt:"tweeter-pic"}})]),a("div",{staticClass:"content"},[a("div",{staticClass:"name-account"},[a("span",{staticClass:"mr-2",staticStyle:{"font-weight":"bolder",color:"slategrey"}},[t._v(t._s(e.user.name))]),a("small",[t._v("@"+t._s(e.user.account))]),a("small",[t._v(" ‧ "+t._s(e.createdAt))])]),a("div",{staticClass:"tweet-text"},[a("p",[t._v(" "+t._s(e.description)+" ")])])])]),a("form",{staticClass:"delete-btn",on:{submit:function(a){return a.stopPropagation(),a.preventDefault(),t.handleDelete(e.id)}}},[t._m(1,!0)])])}))],2)])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[a("span",[t._v("推文清單")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticStyle:{background:"transparent",border:"none"},attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-times",staticStyle:{color:"darkgray"}})])}],n=a("1da1"),i=(a("96cf"),a("159b"),a("4de4"),a("754d")),c=a("be6c"),o=a("2fa3"),l=a("c1df"),u=a.n(l),d={components:{AdminSideBar:i["a"]},data:function(){return{tweets:[]}},created:function(){this.fetchTweets(),u.a.locale("zh-tw")},methods:{fetchTweets:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].getTweets();case 3:if(a=e.sent,s=a.data,s){e.next=7;break}throw new Error(s.message);case 7:t.tweets=s,t.tweets.forEach((function(t){t.createdAt=u()(t.createdAt).fromNow()})),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),o["a"].fire({icon:"error",title:"無法取得推文，請稍後再試！"});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},handleDelete:function(t){var e=this;try{if("admin"!==this.$store.state.currentUser.role)throw new Error("無授權的動作，請重新確認！");o["a"].fire({icon:"warning",title:"確定要刪除嗎？",showConfirmButton:!0,showCancelButton:!0}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(s){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!s.isConfirmed){a.next=11;break}return a.next=3,c["a"].deleteTweet({tweetId:t});case 3:if(r=a.sent,n=r.data,"success"===n.status){a.next=7;break}throw new Error(n.message);case 7:o["a"].fire({icon:"success",title:"推文刪除成功！"}),e.tweets=e.tweets.filter((function(e){return e.id!==t})),a.next=12;break;case 11:return a.abrupt("return");case 12:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}())}catch(a){o["a"].fire({icon:"error",title:"無法刪除推文，請稍後再試！"})}}}},f=d,m=(a("48f5"),a("2877")),g=Object(m["a"])(f,s,r,!1,null,"780e652a",null);e["default"]=g.exports},"754d":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container py-1 px-0",staticStyle:{height:"100%"}},[s("div",{staticClass:"d-flex flex-column justify-content-between",staticStyle:{height:"100%"}},[s("div",{staticClass:"link-area"},[t._m(0),s("div",{staticClass:"admin-main mb-2"},[t.pageIsMainPage?s("img",{attrs:{src:a("43de"),alt:"home-icon"}}):s("img",{attrs:{src:a("a424"),alt:"home-icon"}}),t.pageIsMainPage?s("router-link",{staticStyle:{color:"#ff6600"},attrs:{to:"/admin_main"}},[t._v("推文清單")]):s("router-link",{attrs:{to:"/admin_main"}},[t._v("推文清單")])],1),s("div",{staticClass:"users-list mb-2"},[t.pageIsUserPage?s("img",{attrs:{src:a("1ed2"),alt:"user-icon"}}):s("img",{attrs:{src:a("ef5e"),alt:"user-icon"}}),t.pageIsUserPage?s("router-link",{staticStyle:{color:"#ff6600"},attrs:{to:"/admin_users"}},[t._v("使用者列表")]):s("router-link",{attrs:{to:"/admin_users"}},[t._v("使用者列表")])],1)]),s("div",{staticClass:"logout-area",staticStyle:{"padding-left":"3px"}},[s("img",{attrs:{src:a("e4cd"),alt:"logout-icon"}}),s("router-link",{attrs:{to:"/admin"}},[s("button",{attrs:{type:"button"},on:{click:t.logout}},[t._v("登出")])])],1)])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title mb-3"},[s("img",{attrs:{src:a("808a"),alt:"icon"}})])}],n={props:{pageName:{require:!1}},data:function(){return{pageIsMainPage:!0,pageIsUserPage:!1}},created:function(){this.iconSwitch()},methods:{logout:function(){this.$store.commit("revokeAuthentication")},iconSwitch:function(){"mainPage"===this.pageName?(this.pageIsMainPage=!0,this.pageIsUserPage=!1):"userPage"===this.pageName?(this.pageIsMainPage=!1,this.pageIsUserPage=!0):(this.pageIsMainPage=!1,this.pageIsUserPage=!1)}}},i=n,c=(a("0b73"),a("2877")),o=Object(c["a"])(i,s,r,!1,null,"94362922",null);e["a"]=o.exports},be6c:function(t,e,a){"use strict";var s=a("2fa3");e["a"]={getTweets:function(){return s["b"].get("/tweets")},deleteTweet:function(t){var e=t.tweetId;return s["b"].delete("/admin/tweets/".concat(e))},getUsers:function(){return s["b"].get("/admin/users")}}}}]);
//# sourceMappingURL=chunk-d781eacc.5aa21fb6.js.map