(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77eb9f57"],{"1b6d":function(e,t,a){"use strict";a("42a0")},"42a0":function(e,t,a){},"4ef5":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container row"},[a("div",{staticClass:"row col-12",staticStyle:{left:"20%"}},[a("div",{staticClass:"sidebar-area col-3 px-4 pt-3"},[a("SideBar",{attrs:{"page-name":"setting"},on:{openArea:e.openTweetArea}})],1),a("div",{staticClass:"setting-area col-9 p-0"},[a("div",{staticClass:"title px-3 pt-1"},[e._v("帳戶設定")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isProcessing,expression:"isProcessing"}],staticClass:"fa-3x"},[a("i",{staticClass:"fas fa-circle-notch fa-spin"})]),a("div",{staticClass:"setting-form px-3",class:{dataReading:e.isProcessing}},[a("form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[a("div",{staticClass:"form-label-group mb-4"},[a("label",{attrs:{for:"account"}},[e._v("帳號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],staticClass:"form-control mt-3",attrs:{type:"text",name:"account",id:"account"},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value)}}})]),a("div",{staticClass:"form-label-group mb-4"},[a("label",{attrs:{for:"name"}},[e._v("名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control mt-3",attrs:{type:"text",name:"name",id:"name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),a("div",{staticClass:"form-label-group mb-4"},[a("label",{attrs:{for:"email"}},[e._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control mt-3",attrs:{type:"text",name:"email",id:"email",pattern:"^\\w+((-\\w)|(\\.\\w))*@[A-Za-z0-9]+\\.[A-Za-z]+$"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),a("div",{staticClass:"form-label-group mb-4"},[a("label",{attrs:{for:"password"}},[e._v("設定密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control mt-3",attrs:{type:"password",name:"password",id:"password",required:"",autocomplete:"off",pattern:"[0-9]{8}",placeholder:"請輸入由8位數字組合的密碼"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),a("div",{staticClass:"form-label-group mb-4"},[a("label",{attrs:{for:"passwordCheck"}},[e._v("密碼確認")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.passwordCheck,expression:"passwordCheck"}],staticClass:"form-control mt-3",attrs:{type:"password",name:"passwordCheck",id:"passwordCheck",required:"",autocomplete:"off",pattern:"[0-9]{8}",placeholder:"重新確認密碼"},domProps:{value:e.passwordCheck},on:{input:function(t){t.target.composing||(e.passwordCheck=t.target.value)}}})]),a("div",{staticClass:"btn-wrapper d-flex justify-content-end",staticStyle:{width:"540px"}},[a("button",{staticClass:"btn my-2 submit-btn",attrs:{type:"submit",disabled:e.isSetting}},[e._v(" 儲存 ")])])])])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isTweetBtnClicked,expression:"isTweetBtnClicked"}],staticClass:"tweeting-area"},[a("TweetingForm",{attrs:{"user-avatar":e.userAvatar},on:{closeArea:e.closeTweetArea}})],1)])},r=[],n=a("1da1"),i=(a("96cf"),a("b0c0"),a("ac1f"),a("466d"),a("7c08")),o=a("cfb4"),c=a("4cce"),l=a("2fa3"),u={data:function(){return{id:this.$store.state.currentUser.id,userAvatar:"",account:"",name:"",email:"",password:"",passwordCheck:"",isSetting:!1,isProcessing:!1,isTweetBtnClicked:!1}},components:{SideBar:i["a"],TweetingForm:o["a"]},created:function(){this.fetchUser({userId:this.id})},methods:{fetchUser:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=e.userId,a.prev=1,t.isProcessing=!0,a.next=5,c["a"].getUser({userId:s});case 5:if(r=a.sent,n=r.data,n){a.next=9;break}throw new Error;case 9:t.account=n.account,t.name=n.name,t.email=n.email,t.userAvatar=n.avatar,t.isProcessing=!1,a.next=19;break;case 16:a.prev=16,a.t0=a["catch"](1),l["a"].fire({icon:"error",title:"無法取得資料，請稍後再試！"});case 19:case"end":return a.stop()}}),a,null,[[1,16]])})))()},handleSubmit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.password&&e.passwordCheck){t.next=3;break}return t.abrupt("return",l["a"].fire({icon:"error",title:"尚有欄位未填，請重新確認！"}));case 3:if(e.password.match(/[0-9]{8}/)&&e.passwordCheck.match(/[0-9]{8}/)&&e.email.match(/^\w+((-\w)|(\.\w))*@[A-Za-z0-9]+\.[A-Za-z]+$/)){t.next=5;break}return t.abrupt("return",l["a"].fire({icon:"error",title:"格式錯誤，請重新確認！"}));case 5:return e.isSetting=!0,a=e.id,s={account:e.account,name:e.name,email:e.email,password:e.password,passwordCheck:e.passwordCheck},t.next=10,c["a"].putUser({userId:a},s);case 10:if(r=t.sent,n=r.data,"success"===n.status){t.next=14;break}throw new Error(n.message);case 14:l["a"].fire({icon:"success",title:"資料設定成功！"}),e.isSetting=!1,t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](0),e.isSetting=!1,l["a"].fire({icon:"error",title:"無法設定使用者資料，請重新確認！"});case 22:case"end":return t.stop()}}),t,null,[[0,18]])})))()},openTweetArea:function(){this.isTweetBtnClicked=!0},closeTweetArea:function(){this.isTweetBtnClicked=!1}}},m=u,d=(a("1b6d"),a("2877")),p=Object(d["a"])(m,s,r,!1,null,"5995b36a",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-77eb9f57.41295926.js.map